<!doctype html>
<html lang="en" data-hide>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>PsyAid — Choose your language</title>
  <meta name="description" content="Select Armenian, Russian, or English to continue to PsyAid." />
  <meta name="google-site-verification" content="SLoSipyPeQO0Y1LOBJTYzKxoSSi-JAJuskbKoRsjWJg" />
  <link rel="canonical" href="https://example.com/" />
  <link rel="alternate" hreflang="hy-AM" href="https://example.com/hy/" />
  <link rel="alternate" hreflang="ru"    href="https://example.com/ru/" />
  <link rel="alternate" hreflang="en"    href="https://example.com/en/" />
  <link rel="alternate" hreflang="x-default" href="https://example.com/" />

  <style>html[data-hide]{visibility:hidden}</style>
  <link rel="stylesheet" href="index.css" />

  <!-- lang is chosen => instant redirect or save on click -->
  <script>
    (function () 
    {
      try 
      {
        var hash = location.hash || '#/';
        var saved = localStorage.getItem('PsyAid_lang'); // 'en' | 'ru' | 'hy'
        var isLangPath = /^\/(en|ru|hy)(\/|$)/.test(location.pathname);

        // lang saved && !url/ => autoredirect
        if (saved && !isLangPath) 
        {
          location.replace('/' + saved + '/' + hash);
          return; // force lang choice (url/)
        }
        //based on session lang (auto)
if (!isLangPath && !sessionStorage.getItem('lang_auto_once')) 
{
  var l=(navigator.language||'').toLowerCase();
  var guess = l.startsWith('ru') ? 'ru' : (l.startsWith('hy') || l.includes('hye') || l.includes('arm')) ? 'hy' : 'en';
  sessionStorage.setItem('lang_auto_once','1');
  location.replace('/' + guess + '/' + hash);
  return;
}
        // If no redirect happened, bind click handlers to remember choice
        document.documentElement.removeAttribute('data-hide');
      } catch (e) 
      {
        document.documentElement.removeAttribute('data-hide');
      }
    })();
  </script>
</head>
<body>
  <main class="card" aria-label="Language selector">
    <h1>PsyAid</h1>
    <p class="lead">Choose your language:</p>
    <p>
      <a class="btn primary" href="/en/#/" data-lang="en">English</a>
      <a class="btn" href="/ru/#/" data-lang="ru">Русский</a>
      <a class="btn" href="/hy/#/" data-lang="hy">Հայերեն</a>
    </p>
    <p class="muted">You can switch languages any time from the header.</p>
    <noscript><p class="muted">JavaScript is off. Open: <a href="/en/">/en/</a>, <a href="/ru/">/ru/</a>, <a href="/hy/">/hy/</a>.</p></noscript>
  </main>

 
  <script src="./index.js"></script>
  <script>
    // Save language if user clicks a link here
    (function(){
      try{
        document.querySelectorAll('[data-lang]')
          .forEach(a=>a.addEventListener('click', function(){
            try{ localStorage.setItem('PsyAid_lang', this.getAttribute('data-lang')); }catch(_){ }
          }));
      }catch(_){ }
    })();
  </script>


  <div role="note" aria-label="Safety disclaimer" class="disclaimer">
    ⚠️ This service is <strong>not for emergencies</strong>. In case of emergency, call <strong>112</strong> (or 911) or contact local services (police: 102, ambulance: 103).
  </div>
</body>
</html>
